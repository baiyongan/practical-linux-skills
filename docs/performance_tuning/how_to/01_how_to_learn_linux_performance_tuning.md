# 如何学习Linux性能优化？

## 笔记总结

### 性能问题为什么难？
原因可能有两个：
1. 没有找到有效的方法学原理，一听到 “系统”、“底层”这些词就发怵，觉得太难，无法深入学习去，进而无法建立起性能的全局观。
2. 性能问题更远太复杂，既不懂怎么分析，也不能抽丝剥茧找到瓶颈，常常临时上网查别人的解决方案，囫囵吞枣地尝试，懒得深究。

最终，**相同地错误重复在犯，相同地状况也是重复出现。**
其实，性能问题并没有想象的那么难，**只要理解了应用程序和系统的少数几个基本原理，再进行大量的实战练习，建立起整体性能的全局观**，大多数性能问题的优化就会水到渠成。
事实上，**你不需要了解每个组件的所有实现细节**，只要能理解它们最基本的工作原理和协作方式即可。

### 性能指标是什么？
学习性能优化的第一步，一定是了解“性能指标”这个概念。
性能优化的两个核心指标——**吞吐** 和 **延迟**。
这两个指标，是**从应用负载的视角**，来考察性能，直接影响了产品终端的用户体验。与其对应的，是**从系统资源的视角**出发的指标，比如资源使用率、饱和度等。
![performance_indocator](/images/performace_tuning/001_performance_indicator.png)

性能问题的本质，即是系统资源已经达到瓶颈，但是请求的处理却还不够快，无法支撑更多的请求。
性能分析，其实就是**找出应用或者系统的瓶颈，并设法去避免或者缓解它们**，从而更高效地利用系统资源，处理更多地请求。一般包含以下六个步骤：
1. 选择指标评估因公程序和系统的性能
2. 为应用程序和系统设置性能目标
3. 进行性能基准测试
4. 性能分析定位瓶颈
5. 优化系统和应用程序
6. 性能监控和告警

### 学习重点是什么？

想要学好性能分析和优化，**建立整体系统性能的全局观**是最核心的话题。
学习的重中之重有三点——
- 理解最基本的几个系统知识原理
- 掌握必要的性能工具
- 通过实际的场景演练，贯穿不同的组件

#### 性能优化大师：Brendan Gregg
Linux 性能工具图谱，是Linux 性能分析最重要的参考资料之一，它指明了在 Linux不同子系统出现性能问题后，应该用什么样的工具来观测和分析。
`http://brendangregg.com`

![performance_tool](/images/performace_tuning/002_performance_tool.jpg)

**性能工具的选用**很重要，一个正确的选择胜过千百次的努力。要懂得在什么场景选用什么样子的工具，以及怎么学会选择合适的工具。但是，**千万不要把性能工具当成学习的全部**
，工具只是解决问题的手段，关键在于用法。只有真正理解了其背后的原理，并结合具体场景，融汇贯通系统的不同组件，才算是真正掌握它们。

#### 性能优化思维导图
![performance_mindmap](images/performace_tuning/003_performance_mindmap.jpg)

### 怎么学习更高效？
**技巧一：虽然系统原理很重要，但是刚开始一定不要试图抓住所有的实现细节。**
深陷到系统实现的内部，可能会丢掉学习的重点，而且繁杂的实现逻辑，很可能会打消学习的积极性。所以，一定要适度。
**技巧二：边学边实践，通过大量案例演习，掌握Linux 性能的分析和优化。**
**技巧三：勤思考、多反思、善总结，多问为什么。**
想真正学懂一门知识，最好的方法就是问问题。当你能提出好的问题时，就说明已经深入了解了它。


## 拓展阅读
