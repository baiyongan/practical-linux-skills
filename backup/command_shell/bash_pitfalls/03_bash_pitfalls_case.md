# Bash Pitfalls Case 03
## Filenames with leading dashes

带前划线的文件名可能会导致很多问题。 诸如 *.mp3 之类的 globs 会被分类到一个扩展列表中（根据您当前的语言环境），并且 - 在大多数语言环境中都在字母之前排序。 然后将该列表传递给某些命令，该命令可能会错误地将 -filename 解释为一个选项。 有两个主要解决方案：

一种解决方案是在命令（如cp）及其参数之间插入--。即是告诉它停止扫描选项，一切正常：

```shell
cp -- "$file" "$target"
```

这种方法存在潜在的问题。您必须对于可能被解释为上下文中参数的每种用法，都确保能够插入 --，这其实容易发生遗漏，并且可能涉及很多冗余。

大多数写得很好的选项解析库都了解这一点，正确使用它们的程序应无碍地继承该功能。 但是，仍然请注意，最终还是取决于应用程序来识别选项的结束。 某些手动分析选项，操作不正确或使用较差的第三方库的程序可能无法识别它。 标准实用程序应该具有POSIX指定的一些例外情况。 echo 指令就是一个例子。

另一个方案，是通过使用相对或绝对路径名来确保文件名始终以目录开头。

```shell
for i in ./*.mp3; do
    cp "$i" /target
    ...
done
```

在这种情况下，即使我们有一个以 - 开头的文件，glob也会确保该变量始终包含 ./-foo.mp3 之类的文件，就cp 指令而言，这是绝对安全的。

最后，如果可以保证所有结果都具有相同的前缀，并且在循环体内仅使用了几次变量，则可以简单地将前缀与扩展连接起来。 从理论上讲，这也为会使得每个单词省去生成和存储一些额外的字符。。

```shell
for i in *.mp3; do
    cp "./$i" /target
    ...
done
```

## 拓展阅读